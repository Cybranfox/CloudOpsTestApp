{% extends "base.html" %}

{% block title %}AWS Cloud Orbit - Your Adventure Awaits{% endblock %}

{% block content %}
<div class="mascot-container">
    <img src="{{ url_for('static', filename='zap.png') }}" alt="Zap" class="zap" id="zapMascot">
    <div class="speech-bubble" id="zapSpeech">
        Welcome to your AWS journey!
    </div>
</div>

<div class="progress-section">
    <h2>**Adventure Progress:**</h2>
    
    <div class="stats-grid">
        <div class="stat-item">
            <span class="stat-icon">üåü</span>
            <span class="stat-label">XP:</span>
            <span class="stat-value">{{ progress.xp }}</span>
        </div>
        
        <div class="stat-item">
            <span class="stat-icon">üî•</span>
            <span class="stat-label">Streak:</span>
            <span class="stat-value">{{ progress.streak }} days</span>
        </div>
    </div>
    
    <div class="energy-display">
        <strong>‚ö° Energy Shields:</strong>
        <div class="shields">
            {% for i in range(progress.max_energy) %}
                {% if i < progress.energy %}
                    <span class="shield-full">‚ö°</span>
                {% else %}
                    <span class="shield-empty">‚ö°</span>
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

<div class="achievements-section">
    <h3>**üèÜ Badges Earned:**</h3>
    <div class="badges-container">
        {% for badge in progress.badges %}
            <span class="badge-item">{{ badge }}</span>
        {% endfor %}
        {% if not progress.badges %}
            <p class="no-badges"><em>Complete lessons to earn badges!</em></p>
        {% endif %}
    </div>
</div>

<div class="inventory-section">
    <h3>**üéí Relics Collected:**</h3>
    <div class="relics-container">
        {% for relic in progress.inventory.relics %}
            <div class="relic-item">
                <strong>{{ relic.name }}</strong>: {{ relic.description }}
            </div>
        {% endfor %}
        {% if not progress.inventory.relics %}
            <p class="no-relics"><em>Discover powerful relics in elite battles!</em></p>
        {% endif %}
    </div>
</div>

<div class="adventure-map">
    <h2>üó∫Ô∏è Adventure Map</h2>
    <p>Choose your next challenge:</p>
    
    <div class="lesson-grid">
        {% for i in range(1, 21) %}
            {% set available = i <= progress.current_lesson %}
            {% set completed = i in progress.completed_lessons %}
            
            {% if completed %}
                <a href="{{ url_for('lesson_page', lesson_id=i) }}" class="lesson-node completed">
                    <div class="node-icon">‚úÖ</div>
                    <div class="node-title">Lesson {{ i }}</div>
                    <div class="node-status">Completed</div>
                </a>
            {% elif available %}
                <a href="{{ url_for('lesson_page', lesson_id=i) }}" class="lesson-node available">
                    <div class="node-icon">‚öîÔ∏è</div>
                    <div class="node-title">Lesson {{ i }}</div>
                    <div class="node-status">Available</div>
                </a>
            {% else %}
                <div class="lesson-node locked">
                    <div class="node-icon">üîí</div>
                    <div class="node-title">Lesson {{ i }}</div>
                    <div class="node-status">Locked</div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
</div>

<style>
.progress-section {
    margin: 20px 0;
    padding: 20px;
    background: rgba(var(--color-success-rgb), 0.1);
    border-radius: var(--radius-base);
    border: 2px solid rgba(var(--color-success-rgb), 0.3);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin: 15px 0;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px;
    background: rgba(var(--color-primary-rgb, --color-success-rgb), 0.1);
    border-radius: var(--radius-sm);
}

.stat-icon {
    font-size: 1.2em;
}

.stat-label {
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
}

.stat-value {
    font-weight: var(--font-weight-bold);
    color: var(--color-primary);
}

.energy-display {
    text-align: center;
    margin: 20px 0;
    padding: 15px;
    background: rgba(var(--color-info-rgb), 0.1);
    border-radius: var(--radius-base);
}

.shields {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin: 10px 0;
}

.shield-full {
    color: #f7d51d;
    font-weight: bold;
    font-size: 1.5em;
    text-shadow: 0 0 5px rgba(247, 213, 29, 0.5);
    filter: drop-shadow(0 0 3px rgba(247, 213, 29, 0.8));
}

.shield-empty {
    color: #444;
    opacity: 0.4;
    font-size: 1.5em;
    filter: grayscale(100%);
}

.achievements-section, .inventory-section {
    margin: 25px 0;
    padding: 20px;
    background: rgba(var(--color-warning-rgb), 0.1);
    border-radius: var(--radius-base);
    border: 2px solid rgba(var(--color-warning-rgb), 0.3);
}

.badges-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
}

.badge-item {
    background: var(--color-warning);
    color: var(--color-slate-900);
    padding: 5px 12px;
    border-radius: var(--radius-full);
    font-weight: var(--font-weight-medium);
    font-size: var(--font-size-sm);
    box-shadow: var(--shadow-sm);
}

.relics-container {
    margin-top: 10px;
}

.relic-item {
    margin: 10px 0;
    padding: 12px;
    background: rgba(var(--color-orange-500-rgb), 0.1);
    border-radius: var(--radius-sm);
    border-left: 4px solid var(--color-warning);
    color: var(--color-text);
}

.adventure-map {
    margin: 30px 0;
}

.lesson-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 15px;
    margin: 20px 0;
}

.lesson-node {
    display: block;
    padding: 15px;
    text-align: center;
    border-radius: var(--radius-base);
    text-decoration: none;
    transition: all var(--duration-normal) var(--ease-standard);
    border: 2px solid transparent;
    color: var(--color-text);
    font-weight: var(--font-weight-medium);
}

.lesson-node.available {
    background: linear-gradient(135deg, var(--color-success), var(--color-teal-600));
    border-color: var(--color-success);
    box-shadow: 0 4px 8px rgba(var(--color-success-rgb), 0.3);
    color: var(--color-btn-primary-text);
}

.lesson-node.completed {
    background: linear-gradient(135deg, var(--color-warning), var(--color-orange-500));
    color: var(--color-slate-900);
    border-color: var(--color-warning);
    box-shadow: 0 4px 8px rgba(var(--color-warning-rgb), 0.3);
}

.lesson-node.locked {
    background: var(--color-gray-400);
    color: var(--color-text-secondary);
    cursor: not-allowed;
    opacity: 0.6;
    border-color: var(--color-border);
}

.lesson-node:hover:not(.locked) {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.node-icon {
    font-size: var(--font-size-3xl);
    margin-bottom: var(--space-8);
}

.node-title {
    font-weight: var(--font-weight-medium);
    font-size: var(--font-size-sm);
    margin-bottom: 4px;
}

.node-status {
    font-size: var(--font-size-xs);
    opacity: 0.8;
}

.no-badges, .no-relics {
    color: var(--color-text-secondary);
    font-style: italic;
    text-align: center;
    padding: 20px;
}

@media (max-width: 768px) {
    .lesson-grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .badges-container {
        justify-content: center;
    }
}
</style>

{% endblock %}